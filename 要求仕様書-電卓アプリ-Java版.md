# 電卓アプリケーション 要求仕様書

## 1. 概要

以下に示す機能とデザインを持つ電卓を作成する。
本電卓は、ブラウザ上で動作し、**整数および小数の四則演算** を実行できる。
また、ユーザー入力は最大8桁に制限される。

## 2. 対象環境

* 使用言語: Java
* 使用ライブラリ: Java Swing
* 動作環境: Windows11, MacOS

## 3. 画面仕様

### 3.1 レイアウト

* 数字ボタン（0〜9）
* 小数点ボタン（.）
* 演算子ボタン（+、-、×、÷）
* マイナス記号（-）は符号としても機能
* クリアボタン（C）
* イコールボタン（=）
* 計算結果表示エリア

### 3.2 デザイン

* ボタンは均等に並べ、押しやすい大きさにする
* 表示エリアは現在の入力値および計算結果を見やすく表示する
* 入力桁数は最大8桁に制御する

## 4. 機能仕様

### 4.1 入力

#### 4.1.1 数字入力

* 数字ボタンを押すと、押された順に表示エリアに入力される
* 入力は **最大8桁** までとする（整数部と小数部を含めて8桁）

  * 例: 「123.4567」は7桁、「12.345678」は8桁

#### 4.1.2 演算子入力

* 演算子ボタン（+、-、×、÷）を押すと、表示エリアに演算子が追加される
* 数値が未入力の場合、演算子は無視する（**ただし、マイナス記号は負の数として入力を許可する**）
* 記号が連続で押された場合、直前の記号を新しい記号で **上書きする**

#### 4.1.3 小数点入力

* 小数点（.）を押すと、入力中の数値に小数点を追加できる
* 同じ数値内で複数の小数点入力は **1個目のみ有効**、それ以降は無視する
* 数値が未入力の場合、小数点は無視する（整数の前に小数点のみは不可）

#### 4.1.4 クリア後の動作

* Cボタンを押した直後は、演算子・小数点の入力は無視される

  * 数字またはマイナス記号のみ入力可能とする

#### 4.1.5 イコールボタン

* \=ボタンを押すと、現在の数式を計算し、結果を表示する
* 記号が押された直後に=が押された場合は、**最後の数値を維持して計算しない**
* 数値を入力し、記号を入力する前に=ボタンが押下された場合は**数値を維持して計算しない**

### 4.2 計算結果

* \=ボタン押下時に計算を実行し、結果を表示する
* 計算結果が8桁を超える場合は **指数表記** に変換して表示する

  * 例: `0.1234567 × 0.1 = 1.2345670e-2`
* 計算後、続けて新しい計算ができる

### 4.3 エラー処理

* **0除算** を行った場合、結果は「エラー」と表示し、入力をクリアする
* エラーが発生したとき、画面には「エラー」と表示し、エラーの詳細はコンソールに出力する
* クリアは常に入力内容と結果を初期化する

## 5. 操作例

### 5.1 例：小数点入力・記号入力・0除算のエラー
| 操作    | 表示エリア          |
| ----- | -------------- |
| 3 を押す | 3              |
| . を押す | 3.             |
| . を押す | 3. （2回目は無視される） |
| 5 を押す | 3.5            |
| + を押す | 3.5 +           |
| - を押す | 3.5 - （上書きされる）  |
| 2 を押す | 3.5 - 2          |
| = を押す | 1.5            |
| ÷ を押す | 1.5 ÷           |
| 0 を押す | 1.5 ÷ 0          |
| = を押す | エラー            |

### 5.2 例：計算順序について
|操作|表示エリア|
|---|---|
| 3 を押す | 3   |              c=3
| + を押す | 3 + |  left=3 op=+
| 2 を押す | 3 + 2 |left=3 op=+ c=2
| × を押す | 5 × |  left=5 op=×
| 4 を押す | 5 × 4 |left=5 op=× c=2
| = を押す | 20 |   left=20

## 6. 制約事項

| 項目     | 内容                           |
| ------ | ---------------------------- |
| 入力桁数   | 数値入力は最大8桁（整数+小数部）            |
| 計算結果   | 8桁以内なら通常表示、超える場合は指数表記        |
| 計算内部処理 | Java 標準の `BigDecimal` クラスを使用。 |
| 演算優先順位 | 左から順に計算（通常の算術優先順位は考慮しない）     |
| 0除算    | エラー扱いとする                     |


